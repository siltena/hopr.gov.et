AUI.add("upcoming-events-edit",function(a){var e="#event-list",d="#edit-form",b="#hidden_events_json",c=".background-color-picker";a.UpcomingEventsEdit=a.Base.create("upcoming-events-edit",a.Base,[Liferay.PortletBase],{dataSet:{},initializer:function(){var i=this,g=a.one(e),k=this.one(d),h=this.one(b),j=this.get("hiddenEventsJson"),f;this.dataSet=new a.DataSet({getKey:function(l){return l}});this.dataSet.addAll(JSON.parse(j));if(g){g.delegate("click",function(l){i._updateData(this);i._toggleClasses(this)},"li")}f=new a.ColorPickerPopover({trigger:c,zIndex:2,strings:{cancel:'\u0043\u0061\u006e\u0063\u0065\u006c',header:'\u0043\u0068\u006f\u006f\u0073\u0065\u0020\u0063\u0075\u0073\u0074\u006f\u006d\u0020\u0063\u006f\u006c\u006f\u0072',more:'\u004d\u006f\u0072\u0065\u0020\u0063\u006f\u006c\u006f\u0072\u0073\u0020\u002e\u002e\u002e',noColor:'\u004e\u006f\u0020\u0063\u006f\u006c\u006f\u0072',none:'\u004e\u006f\u006e\u0065',ok:"OK"},}).render();f.on("select",function(l){l.trigger.set("value",l.color);a.all(".event-date time").each(function(){this.setStyle("backgroundColor",l.color)})});k.on("submit",function(m){m.halt();var l=[];a.Object.each(i.dataSet.get("items"),function(n){l.push(n)});h.val(JSON.stringify(l));k.submit()})},_updateData:function(f){var g=f.attr("data-id");if(f.hasClass("event-hidden")){this.dataSet.remove(g)}else{this.dataSet.add(g)}},_toggleClasses:function(g){var f=g.one(".event-button");if(g.hasClass("event-hidden")){g.replaceClass("event-hidden","event-visible");f.replaceClass("icon-eye-close","icon-eye-open")}else{g.replaceClass("event-visible","event-hidden");f.replaceClass("icon-eye-open","icon-eye-close")}}},{ATTRS:{hiddenEventsJson:{value:""}}})},"2.5.0",{requires:["aui-base","aui-data-set-deprecated","aui-color-picker-popover","liferay-portlet-base"]});